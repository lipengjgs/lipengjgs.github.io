import{P as _,i as se,Q as te,R as $,S as ie,T as ne,U as re,y as ae,k as q,s as H,V as oe,u as G,j as t,W as le,X as O,Y as ce,Z as ge,$ as me,a0 as fe,a1 as ue,a2 as he,B as pe,a3 as be,a4 as de,a5 as P,E as ve,a6 as ye,m as Se,a7 as I,a8 as F,a9 as je}from"./app-BJqe5cHa.js";const ke=["/portfolio.html","/","/architecture/","/cs-basic/","/memorabilia/2023.html","/memorabilia/2024.html","/memorabilia/","/en/portfolio.html","/en/","/programming/","/soft-engineering/","/cs-basic/basic/ComputerStructure.html","/cs-basic/basic/CPU.html","/cs-basic/basic/data.html","/cs-basic/basic/performance.html","/cs-basic/basic/","/cs-basic/database/DBMS.html","/cs-basic/database/design.html","/cs-basic/database/ER.html","/cs-basic/database/","/cs-basic/network/ConceptStructure.html","/cs-basic/network/Internet.html","/cs-basic/network/","/cs-basic/network/Safety.html","/cs-basic/network/StandardProtocal.html","/cs-basic/network/TCP.html","/cs-basic/os/","/en/demo/disable.html","/en/demo/encrypt.html","/en/demo/layout.html","/en/demo/markdown.html","/en/demo/page.html","/en/demo/","/en/guide/","/hobbies/Music/01.html","/hobbies/Music/02.html","/hobbies/Music/MusicTheory.html","/hobbies/Music/","/others/AI/Functions.html","/others/AI/","/others/AI/Shortcuts.html","/others/AI/Tools.html","/others/Maya/","/others/PS/Actions.html","/others/PS/","/others/PS/Shortcuts.html","/programming/algorithm/BackTrack.html","/programming/algorithm/Design.html","/programming/algorithm/Divide%20and%20Conquer.html","/programming/algorithm/Dynamic.html","/programming/algorithm/Greedy.html","/programming/algorithm/Others.html","/programming/algorithm/","/programming/algorithm/Search.html","/programming/algorithm/Sort.html","/programming/algorithm/String.html","/programming/language/compilecore.html","/programming/language/Grammar.html","/programming/language/","/programming/language/Setup.html","/programming/oo/design-pattern.html","/programming/oo/principle.html","/programming/oo/","/programming/oo/UML.html","/programming/structure/Array.html","/programming/structure/Linear.html","/programming/structure/Map.html","/programming/structure/","/programming/structure/Tree.html","/programming/structuredev/DFD.html","/programming/structuredev/","/soft-engineering/be/","/soft-engineering/cicd/oss.html","/soft-engineering/cicd/","/soft-engineering/client/","/soft-engineering/devops/","/soft-engineering/fe/","/soft-engineering/functions/Agile.html","/soft-engineering/functions/OO.html","/soft-engineering/functions/","/soft-engineering/functions/Structure.html","/soft-engineering/project-management/","/soft-engineering/requirements/","/soft-engineering/test/","/soft-engineering/tools/git.html","/soft-engineering/tools/gitlab.html","/soft-engineering/tools/PackageManager.html","/soft-engineering/tools/vscode.html","/cs-basic/database/relation-database/Math.html","/cs-basic/database/relation-database/","/cs-basic/database/relation-database/SQL.html","/cs-basic/os/computeros/Android.html","/cs-basic/os/computeros/iOS.html","/cs-basic/os/computeros/Linux.html","/cs-basic/os/computeros/MacOS.html","/cs-basic/os/computeros/","/cs-basic/os/computeros/vim.html","/cs-basic/os/computeros/Windows.html","/cs-basic/os/functions/Device.html","/cs-basic/os/functions/File.html","/cs-basic/os/functions/Job.html","/cs-basic/os/functions/Process.html","/cs-basic/os/functions/","/cs-basic/os/functions/Storage.html","/en/guide/bar/baz.html","/en/guide/bar/","/others/Maya/Practice/","/en/guide/foo/ray.html","/en/guide/foo/","/programming/language/LangHandler/","/programming/language/SeniorLang/python.html","/programming/language/SeniorLang/","/programming/language/SeniorLang/scrapy.html","/soft-engineering/be/mysql/Q_A.html","/soft-engineering/be/mysql/","/soft-engineering/be/nestjs/","/soft-engineering/be/node/nestjs.html","/soft-engineering/be/node/","/soft-engineering/cicd/docker/","/soft-engineering/cicd/nginx/","/soft-engineering/client/flutter/basic.html","/soft-engineering/client/flutter/dart.html","/soft-engineering/client/flutter/","/soft-engineering/client/harmonyos/ArkTS.html","/soft-engineering/client/harmonyos/ArkUI.html","/soft-engineering/client/harmonyos/DevEcoStudio.html","/soft-engineering/client/harmonyos/","/soft-engineering/fe/fe-basic/divcss%E5%91%BD%E5%90%8D.html","/soft-engineering/fe/fe-basic/","/soft-engineering/fe/fe-engineering/","/soft-engineering/fe/fe-frames/","/soft-engineering/fe/library/","/soft-engineering/fe/performance/","/soft-engineering/fe/fe-basic/browser/api.html","/soft-engineering/fe/fe-basic/browser/event-loop.html","/soft-engineering/fe/fe-basic/browser/Q_A.html","/soft-engineering/fe/fe-basic/browser/","/soft-engineering/fe/fe-basic/browser/render.html","/soft-engineering/fe/fe-basic/browser/url-page.html","/soft-engineering/fe/fe-basic/css/Basic.html","/soft-engineering/fe/fe-basic/css/Questions.html","/soft-engineering/fe/fe-basic/css/","/soft-engineering/fe/fe-basic/css/%E7%B1%BBWord%E5%A4%8D%E6%9D%82%E8%A1%A8%E6%A0%BC.html","/soft-engineering/fe/fe-basic/html/Basic.html","/soft-engineering/fe/fe-basic/html/GoodPractice.html","/soft-engineering/fe/fe-basic/html/H5Properties.html","/soft-engineering/fe/fe-basic/html/","/soft-engineering/fe/fe-basic/js/GoodPractice.html","/soft-engineering/fe/fe-basic/js/Questions.html","/soft-engineering/fe/fe-basic/js/","/soft-engineering/fe/fe-basic/js/TypeCasting.html","/soft-engineering/fe/fe-frames/uniapp/","/soft-engineering/fe/fe-frames/react/","/soft-engineering/fe/fe-basic/layout/flex.html","/soft-engineering/fe/fe-basic/layout/grid.html","/soft-engineering/fe/fe-basic/layout/","/soft-engineering/fe/fe-frames/vue/","/soft-engineering/fe/fe-basic/css/Preprocessor/Less.html","/soft-engineering/fe/fe-basic/css/Preprocessor/","/soft-engineering/fe/fe-basic/css/Preprocessor/Sass.html","/soft-engineering/fe/fe-basic/css/Preprocessor/Stylus.html","/soft-engineering/fe/fe-basic/css/Properties/display.html","/soft-engineering/fe/fe-basic/js/basic/BaiscConcept.html","/soft-engineering/fe/fe-basic/js/basic/DataStructure.html","/soft-engineering/fe/fe-basic/js/basic/DataType.html","/soft-engineering/fe/fe-basic/js/basic/Grammar.html","/soft-engineering/fe/fe-basic/js/basic/Lexical.html","/soft-engineering/fe/fe-basic/js/core/async.html","/soft-engineering/fe/fe-basic/js/core/es6.html","/soft-engineering/fe/fe-basic/js/core/es7.html","/soft-engineering/fe/fe-basic/js/core/es8.html","/soft-engineering/fe/fe-basic/js/core/function.html","/soft-engineering/fe/fe-basic/js/core/prototype.html","/soft-engineering/fe/fe-basic/js/core/scope.html","/soft-engineering/fe/fe-basic/js/frames/react.html","/soft-engineering/fe/fe-basic/js/frames/vue2.x.html","/soft-engineering/fe/fe-basic/js/frames/vue3.x.html","/soft-engineering/fe/fe-basic/js/senior/build-tools.html","/soft-engineering/fe/fe-basic/js/senior/design-pattern.html","/soft-engineering/fe/fe-basic/js/senior/design-principle.html","/soft-engineering/fe/fe-basic/js/senior/module.html","/soft-engineering/fe/fe-basic/js/senior/skills.html","/soft-engineering/fe/fe-basic/js/TS/TypeScript.html","/soft-engineering/fe/fe-frames/vue/v2x/","/soft-engineering/fe/fe-frames/vue/v2x/style.html","/soft-engineering/fe/fe-frames/vue/v3x/Q_A.html","/soft-engineering/fe/fe-frames/vue/v3x/","/404.html","/hobbies/","/others/","/soft-engineering/tools/","/soft-engineering/fe/fe-basic/css/Properties/","/soft-engineering/fe/fe-basic/js/basic/","/soft-engineering/fe/fe-basic/js/core/","/soft-engineering/fe/fe-basic/js/frames/","/soft-engineering/fe/fe-basic/js/senior/","/soft-engineering/fe/fe-basic/js/TS/"],we="SEARCH_PRO_QUERY_HISTORY",d=_(we,[]),He=()=>{const{queryHistoryCount:i}=P,n=i>0;return{enabled:n,queryHistory:d,addQueryHistory:r=>{n&&(d.value=Array.from(new Set([r,...d.value.slice(0,i-1)])))},removeQueryHistory:r=>{d.value=[...d.value.slice(0,r),...d.value.slice(r+1)]}}},T=i=>ke[i.id]+("anchor"in i?`#${i.anchor}`:""),Pe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:U}=P,v=_(Pe,[]),xe=()=>{const i=U>0;return{enabled:i,resultHistory:v,addResultHistory:n=>{if(i){const r={link:T(n),display:n.display};"header"in n&&(r.header=n.header),v.value=[r,...v.value.slice(0,U-1)]}},removeResultHistory:n=>{v.value=[...v.value.slice(0,n),...v.value.slice(n+1)]}}},Ae=i=>{const n=fe(),r=$(),x=ue(),o=q(0),j=H(()=>o.value>0),h=he([]);return pe(()=>{const{search:p,terminate:A}=be(),y=de(g=>{const S=g.join(" "),{searchFilter:Q=u=>u,splitWord:D,suggestionsFilter:E,...b}=n.value;S?(o.value+=1,p(g.join(" "),r.value,b).then(u=>Q(u,S,r.value,x.value)).then(u=>{o.value-=1,h.value=u}).catch(u=>{console.warn(u),o.value-=1,o.value||(h.value=[])})):h.value=[]},P.searchDelay-P.suggestDelay);G([i,r],([g])=>y(g),{immediate:!0}),ve(()=>{A()})}),{isSearching:j,results:h}};var De=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(i,{emit:n}){const r=te(),x=$(),o=ie(ne),{enabled:j,addQueryHistory:h,queryHistory:p,removeQueryHistory:A}=He(),{enabled:y,resultHistory:g,addResultHistory:S,removeResultHistory:Q}=xe(),D=j||y,E=re(i,"queries"),{results:b,isSearching:u}=Ae(E),a=ae({isQuery:!0,index:0}),m=q(0),f=q(0),M=H(()=>D&&(p.value.length>0||g.value.length>0)),R=H(()=>b.value.length>0),C=H(()=>b.value[m.value]||null),Y=()=>{const{isQuery:e,index:s}=a;s===0?(a.isQuery=!e,a.index=e?g.value.length-1:p.value.length-1):a.index=s-1},W=()=>{const{isQuery:e,index:s}=a;s===(e?p.value.length-1:g.value.length-1)?(a.isQuery=!e,a.index=0):a.index=s+1},V=()=>{m.value=m.value>0?m.value-1:b.value.length-1,f.value=C.value.contents.length-1},z=()=>{m.value=m.value<b.value.length-1?m.value+1:0,f.value=0},J=()=>{f.value<C.value.contents.length-1?f.value+=1:z()},X=()=>{f.value>0?f.value-=1:V()},L=e=>e.map(s=>je(s)?s:t(s[0],s[1])),Z=e=>{if(e.type==="customField"){const s=ye[e.index]||"$content",[l,w=""]=Se(s)?s[x.value].split("$content"):s.split("$content");return e.display.map(c=>t("div",L([l,...c,w])))}return e.display.map(s=>t("div",L(s)))},k=()=>{m.value=0,f.value=0,n("updateQuery",""),n("close")},K=()=>j?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},o.value.queryHistory),p.value.map((e,s)=>t("div",{class:["search-pro-result-item",{active:a.isQuery&&a.index===s}],onClick:()=>{n("updateQuery",e)}},[t(I,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:F,onClick:l=>{l.preventDefault(),l.stopPropagation(),A(s)}})]))])):null,N=()=>y?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},o.value.resultHistory),g.value.map((e,s)=>t(O,{to:e.link,class:["search-pro-result-item",{active:!a.isQuery&&a.index===s}],onClick:()=>{k()}},()=>[t(I,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(l=>L(l)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:F,onClick:l=>{l.preventDefault(),l.stopPropagation(),Q(s)}})]))])):null;return oe("keydown",e=>{if(i.isFocusing){if(R.value){if(e.key==="ArrowUp")X();else if(e.key==="ArrowDown")J();else if(e.key==="Enter"){const s=C.value.contents[f.value];h(i.queries.join(" ")),S(s),r.push(T(s)),k()}}else if(y){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")W();else if(e.key==="Enter"){const{index:s}=a;a.isQuery?(n("updateQuery",p.value[s]),e.preventDefault()):(r.push(g.value[s].link),k())}}}}),G([m,f],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:i.queries.length?!R.value:!M.value}],id:"search-pro-results"},i.queries.length?u.value?t(le,{hint:o.value.searching}):R.value?t("ul",{class:"search-pro-result-list"},b.value.map(({title:e,contents:s},l)=>{const w=m.value===l;return t("li",{class:["search-pro-result-list-item",{active:w}]},[t("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),s.map((c,ee)=>{const B=w&&f.value===ee;return t(O,{to:T(c),class:["search-pro-result-item",{active:B,"aria-selected":B}],onClick:()=>{h(i.queries.join(" ")),S(c),k()}},()=>[c.type==="text"?null:t(c.type==="title"?ce:c.type==="heading"?ge:me,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[c.type==="text"&&c.header?t("div",{class:"content-header"},c.header):null,t("div",Z(c))])])})])})):o.value.emptyResult:D?M.value?[K(),N()]:o.value.emptyHistory:o.value.emptyResult)}});export{De as default};
