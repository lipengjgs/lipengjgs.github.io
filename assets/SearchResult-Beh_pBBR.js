import{P as _,i as se,Q as te,R as $,S as ie,T as ne,U as ae,y as re,k as q,s as H,V as oe,u as G,j as t,W as le,X as B,Y as ce,Z as ge,$ as me,a0 as ue,a1 as fe,a2 as he,B as pe,a3 as de,a4 as be,a5 as x,E as ve,a6 as ye,m as Se,a7 as I,a8 as F,a9 as je}from"./app-ZUuEE0WH.js";const we=["/portfolio.html","/","/cs-basic/","/en/portfolio.html","/en/","/programming/","/soft-engineering/","/cs-basic/basic/ComputerStructure.html","/cs-basic/basic/CPU.html","/cs-basic/basic/data.html","/cs-basic/basic/hardware.html","/cs-basic/basic/performance.html","/cs-basic/database/DBMS.html","/cs-basic/database/design.html","/cs-basic/database/ER.html","/cs-basic/database/","/cs-basic/network/ConceptStructure.html","/cs-basic/network/Internet.html","/cs-basic/network/","/cs-basic/network/Safety.html","/cs-basic/network/StandardProtocal.html","/cs-basic/network/TCP.html","/en/demo/disable.html","/en/demo/layout.html","/en/demo/markdown.html","/en/demo/page.html","/en/demo/","/cs-basic/os/","/en/guide/","/hobbies/Music/","/others/AI/Functions.html","/others/AI/Practice.html","/others/AI/","/others/AI/Shortcuts.html","/others/AI/Tools.html","/others/Maya/","/others/PS/Actions.html","/others/PS/Practice.html","/others/PS/","/others/PS/Shortcuts.html","/programming/algorithm/BackTrack.html","/programming/algorithm/Design.html","/programming/algorithm/Divide%20and%20Conquer.html","/programming/algorithm/Dynamic.html","/programming/algorithm/Greedy.html","/programming/algorithm/Others.html","/programming/algorithm/","/programming/algorithm/Search.html","/programming/algorithm/Sort.html","/programming/algorithm/String.html","/programming/language/compilecore.html","/programming/language/Grammar.html","/programming/language/","/programming/language/Setup.html","/programming/oo/design-pattern.html","/programming/oo/principle.html","/programming/oo/","/programming/oo/UML.html","/programming/structure/Array.html","/programming/structure/Linear.html","/programming/structure/Map.html","/programming/structure/","/programming/structure/Tree.html","/programming/structuredev/DFD.html","/programming/structuredev/","/soft-engineering/be/","/soft-engineering/cicd/","/soft-engineering/client/","/soft-engineering/devops/","/soft-engineering/fe/","/soft-engineering/functions/Agile.html","/soft-engineering/functions/OO.html","/soft-engineering/functions/","/soft-engineering/functions/Structure.html","/soft-engineering/project-management/","/soft-engineering/requirements/","/soft-engineering/test/","/soft-engineering/tools/git.html","/soft-engineering/tools/PackageManager.html","/cs-basic/database/relation-database/Math.html","/cs-basic/database/relation-database/","/cs-basic/database/relation-database/SQL.html","/cs-basic/os/computeros/command.html","/cs-basic/os/computeros/Linux.html","/cs-basic/os/computeros/MacOS.html","/cs-basic/os/computeros/","/cs-basic/os/computeros/vim.html","/cs-basic/os/computeros/Windows.html","/cs-basic/os/functions/","/en/guide/bar/baz.html","/en/guide/bar/","/en/guide/foo/ray.html","/en/guide/foo/","/others/Maya/Practice/","/programming/language/lang-extend/","/programming/language/SeniorLang/python.html","/soft-engineering/be/docker/","/programming/language/LangHandler/","/soft-engineering/be/mysql/Q_A.html","/soft-engineering/be/mysql/","/soft-engineering/be/nginx/","/soft-engineering/be/node/nestjs.html","/soft-engineering/be/node/","/soft-engineering/fe/fe-basic/","/soft-engineering/fe/fe-engineering/","/soft-engineering/fe/fe-frames/","/soft-engineering/fe/ide/vscode.html","/soft-engineering/fe/newer-tech/HarmonyOS.html","/soft-engineering/fe/performance/","/programming/language/lang-extend/TS/","/soft-engineering/fe/fe-basic/browser/event-loop.html","/soft-engineering/fe/fe-basic/browser/Q_A.html","/soft-engineering/fe/fe-basic/browser/","/soft-engineering/fe/fe-basic/browser/render.html","/soft-engineering/fe/fe-basic/browser/url-page.html","/soft-engineering/fe/fe-basic/css/Questions.html","/soft-engineering/fe/fe-basic/css/","/soft-engineering/fe/fe-basic/css/%E7%B1%BBWord%E5%A4%8D%E6%9D%82%E8%A1%A8%E6%A0%BC.html","/soft-engineering/fe/fe-basic/html/Basic.html","/soft-engineering/fe/fe-basic/html/GoodPractice.html","/soft-engineering/fe/fe-basic/html/H5Properties.html","/soft-engineering/fe/fe-basic/html/Layout.html","/soft-engineering/fe/fe-basic/html/","/soft-engineering/fe/fe-basic/js/GoodPractice.html","/soft-engineering/fe/fe-basic/js/Questions.html","/soft-engineering/fe/fe-basic/js/","/soft-engineering/fe/fe-basic/js/TypeCasting.html","/soft-engineering/fe/fe-frames/react/","/soft-engineering/fe/fe-frames/uniapp/","/soft-engineering/fe/fe-frames/vue/","/soft-engineering/fe/fe-basic/css/Properties/display.html","/soft-engineering/fe/fe-basic/js/basic/BaiscConcept.html","/soft-engineering/fe/fe-basic/js/basic/DataStructure.html","/soft-engineering/fe/fe-basic/js/basic/DataType.html","/soft-engineering/fe/fe-basic/js/basic/Grammar.html","/soft-engineering/fe/fe-basic/js/basic/Lexical.html","/soft-engineering/fe/fe-basic/js/frames/react.html","/soft-engineering/fe/fe-basic/js/frames/vue2.x.html","/soft-engineering/fe/fe-basic/js/frames/vue3.x.html","/soft-engineering/fe/fe-basic/js/core/async.html","/soft-engineering/fe/fe-basic/js/core/es6.html","/soft-engineering/fe/fe-basic/js/core/es7.html","/soft-engineering/fe/fe-basic/js/core/es8.html","/soft-engineering/fe/fe-basic/js/core/function.html","/soft-engineering/fe/fe-basic/js/core/prototype.html","/soft-engineering/fe/fe-basic/js/core/scope.html","/soft-engineering/fe/fe-basic/js/senior/build-tools.html","/soft-engineering/fe/fe-basic/js/senior/design-pattern.html","/soft-engineering/fe/fe-basic/js/senior/design-principle.html","/soft-engineering/fe/fe-basic/js/senior/module.html","/soft-engineering/fe/fe-basic/js/senior/skills.html","/soft-engineering/fe/fe-frames/vue/v3x/","/soft-engineering/fe/fe-frames/vue/v2x/style.html","/404.html","/cs-basic/basic/","/hobbies/","/others/","/soft-engineering/tools/","/programming/language/SeniorLang/","/soft-engineering/fe/ide/","/soft-engineering/fe/newer-tech/","/soft-engineering/fe/fe-basic/css/Properties/","/soft-engineering/fe/fe-basic/js/basic/","/soft-engineering/fe/fe-basic/js/frames/","/soft-engineering/fe/fe-basic/js/core/","/soft-engineering/fe/fe-basic/js/senior/","/soft-engineering/fe/fe-frames/vue/v2x/"],ke="SEARCH_PRO_QUERY_HISTORY",b=_(ke,[]),He=()=>{const{queryHistoryCount:i}=x,n=i>0;return{enabled:n,queryHistory:b,addQueryHistory:a=>{n&&(b.value=Array.from(new Set([a,...b.value.slice(0,i-1)])))},removeQueryHistory:a=>{b.value=[...b.value.slice(0,a),...b.value.slice(a+1)]}}},E=i=>we[i.id]+("anchor"in i?`#${i.anchor}`:""),xe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:U}=x,v=_(xe,[]),Pe=()=>{const i=U>0;return{enabled:i,resultHistory:v,addResultHistory:n=>{if(i){const a={link:E(n),display:n.display};"header"in n&&(a.header=n.header),v.value=[a,...v.value.slice(0,U-1)]}},removeResultHistory:n=>{v.value=[...v.value.slice(0,n),...v.value.slice(n+1)]}}},Qe=i=>{const n=ue(),a=$(),P=fe(),o=q(0),j=H(()=>o.value>0),h=he([]);return pe(()=>{const{search:p,terminate:Q}=de(),y=be(g=>{const S=g.join(" "),{searchFilter:R=f=>f,splitWord:A,suggestionsFilter:T,...d}=n.value;S?(o.value+=1,p(g.join(" "),a.value,d).then(f=>R(f,S,a.value,P.value)).then(f=>{o.value-=1,h.value=f}).catch(f=>{console.warn(f),o.value-=1,o.value||(h.value=[])})):h.value=[]},x.searchDelay-x.suggestDelay);G([i,a],([g])=>y(g),{immediate:!0}),ve(()=>{Q()})}),{isSearching:j,results:h}};var Ae=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(i,{emit:n}){const a=te(),P=$(),o=ie(ne),{enabled:j,addQueryHistory:h,queryHistory:p,removeQueryHistory:Q}=He(),{enabled:y,resultHistory:g,addResultHistory:S,removeResultHistory:R}=Pe(),A=j||y,T=ae(i,"queries"),{results:d,isSearching:f}=Qe(T),r=re({isQuery:!0,index:0}),m=q(0),u=q(0),M=H(()=>A&&(p.value.length>0||g.value.length>0)),C=H(()=>d.value.length>0),D=H(()=>d.value[m.value]||null),Y=()=>{const{isQuery:e,index:s}=r;s===0?(r.isQuery=!e,r.index=e?g.value.length-1:p.value.length-1):r.index=s-1},W=()=>{const{isQuery:e,index:s}=r;s===(e?p.value.length-1:g.value.length-1)?(r.isQuery=!e,r.index=0):r.index=s+1},V=()=>{m.value=m.value>0?m.value-1:d.value.length-1,u.value=D.value.contents.length-1},z=()=>{m.value=m.value<d.value.length-1?m.value+1:0,u.value=0},X=()=>{u.value<D.value.contents.length-1?u.value+=1:z()},Z=()=>{u.value>0?u.value-=1:V()},L=e=>e.map(s=>je(s)?s:t(s[0],s[1])),J=e=>{if(e.type==="customField"){const s=ye[e.index]||"$content",[l,k=""]=Se(s)?s[P.value].split("$content"):s.split("$content");return e.display.map(c=>t("div",L([l,...c,k])))}return e.display.map(s=>t("div",L(s)))},w=()=>{m.value=0,u.value=0,n("updateQuery",""),n("close")},K=()=>j?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},o.value.queryHistory),p.value.map((e,s)=>t("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===s}],onClick:()=>{n("updateQuery",e)}},[t(I,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:F,onClick:l=>{l.preventDefault(),l.stopPropagation(),Q(s)}})]))])):null,N=()=>y?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},o.value.resultHistory),g.value.map((e,s)=>t(B,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===s}],onClick:()=>{w()}},()=>[t(I,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(l=>L(l)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:F,onClick:l=>{l.preventDefault(),l.stopPropagation(),R(s)}})]))])):null;return oe("keydown",e=>{if(i.isFocusing){if(C.value){if(e.key==="ArrowUp")Z();else if(e.key==="ArrowDown")X();else if(e.key==="Enter"){const s=D.value.contents[u.value];h(i.queries.join(" ")),S(s),a.push(E(s)),w()}}else if(y){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")W();else if(e.key==="Enter"){const{index:s}=r;r.isQuery?(n("updateQuery",p.value[s]),e.preventDefault()):(a.push(g.value[s].link),w())}}}}),G([m,u],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:i.queries.length?!C.value:!M.value}],id:"search-pro-results"},i.queries.length?f.value?t(le,{hint:o.value.searching}):C.value?t("ul",{class:"search-pro-result-list"},d.value.map(({title:e,contents:s},l)=>{const k=m.value===l;return t("li",{class:["search-pro-result-list-item",{active:k}]},[t("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),s.map((c,ee)=>{const O=k&&u.value===ee;return t(B,{to:E(c),class:["search-pro-result-item",{active:O,"aria-selected":O}],onClick:()=>{h(i.queries.join(" ")),S(c),w()}},()=>[c.type==="text"?null:t(c.type==="title"?ce:c.type==="heading"?ge:me,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[c.type==="text"&&c.header?t("div",{class:"content-header"},c.header):null,t("div",J(c))])])})])})):o.value.emptyResult:A?M.value?[K(),N()]:o.value.emptyHistory:o.value.emptyResult)}});export{Ae as default};
