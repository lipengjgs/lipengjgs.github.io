import{O as I,i as se,P as ie,Q as M,R as ne,S as te,T as ae,x as re,k as E,q as w,U as le,s as Y,j as i,V as oe,W as F,X as ce,Y as ue,Z as ge,$ as fe,a0 as me,a1 as he,A as ve,a2 as pe,a3 as de,a4 as R,D as be,a5 as ye,m as je,a6 as U,a7 as $,a8 as He}from"./app-3Ky8IqNk.js";const ke=["/portfolio.html","/","/cs-basic/","/en/portfolio.html","/en/","/programming/","/soft-engineering/","/cs-basic/basic/CPU.html","/cs-basic/basic/data.html","/cs-basic/basic/hardware.html","/cs-basic/database/ER.html","/cs-basic/network/","/cs-basic/network/TCP.html","/cs-basic/os/command.html","/cs-basic/os/Linux.html","/cs-basic/os/MacOS.html","/cs-basic/os/","/cs-basic/os/vim.html","/cs-basic/os/Windows.html","/en/demo/disable.html","/en/demo/layout.html","/en/demo/markdown.html","/en/demo/page.html","/en/demo/","/en/guide/","/programming/algorithm/","/programming/language/compilecore.html","/programming/language/","/programming/structure/","/soft-engineering/be/","/soft-engineering/client/","/soft-engineering/devops/","/soft-engineering/fe/","/soft-engineering/oo/design-pattern.html","/soft-engineering/oo/principle.html","/soft-engineering/oo/","/soft-engineering/oo/UML.html","/soft-engineering/project-management/","/soft-engineering/structuredev/DFD.html","/soft-engineering/test/","/soft-engineering/tools/git.html","/soft-engineering/tools/npm.html","/en/guide/bar/baz.html","/en/guide/bar/","/en/guide/foo/ray.html","/en/guide/foo/","/programming/language/lang-extend/","/programming/language/python/python.html","/soft-engineering/be/docker/","/soft-engineering/be/mysql/","/soft-engineering/be/nginx/","/soft-engineering/be/node/nestjs.html","/soft-engineering/be/node/","/soft-engineering/fe/fe-basic/","/soft-engineering/fe/fe-engineering/","/soft-engineering/fe/fe-frames/","/soft-engineering/fe/performance/","/programming/language/lang-extend/TS/","/soft-engineering/fe/fe-basic/browser/event-loop.html","/soft-engineering/fe/fe-basic/browser/","/soft-engineering/fe/fe-basic/css/Questions.html","/soft-engineering/fe/fe-basic/css/","/soft-engineering/fe/fe-basic/css/%E7%B1%BBWord%E5%A4%8D%E6%9D%82%E8%A1%A8%E6%A0%BC.html","/soft-engineering/fe/fe-basic/html/Basic.html","/soft-engineering/fe/fe-basic/html/GoodPractice.html","/soft-engineering/fe/fe-basic/html/H5Properties.html","/soft-engineering/fe/fe-basic/html/Layout.html","/soft-engineering/fe/fe-basic/html/","/soft-engineering/fe/fe-basic/js/GoodPractice.html","/soft-engineering/fe/fe-basic/js/Questions.html","/soft-engineering/fe/fe-basic/js/","/soft-engineering/fe/fe-basic/js/TypeCasting.html","/soft-engineering/fe/fe-frames/react/","/soft-engineering/fe/fe-frames/vue/","/soft-engineering/fe/fe-basic/css/Properties/display.html","/soft-engineering/fe/fe-basic/js/basic/BaiscConcept.html","/soft-engineering/fe/fe-basic/js/basic/DataStructure.html","/soft-engineering/fe/fe-basic/js/basic/DataType.html","/soft-engineering/fe/fe-basic/js/basic/Grammar.html","/soft-engineering/fe/fe-basic/js/basic/Lexical.html","/soft-engineering/fe/fe-basic/js/senior/build-tools.html","/soft-engineering/fe/fe-basic/js/senior/design-pattern.html","/soft-engineering/fe/fe-basic/js/senior/design-principle.html","/soft-engineering/fe/fe-basic/js/senior/module.html","/soft-engineering/fe/fe-basic/js/senior/skills.html","/soft-engineering/fe/fe-basic/js/core/async.html","/soft-engineering/fe/fe-basic/js/core/es6.html","/soft-engineering/fe/fe-basic/js/core/es7.html","/soft-engineering/fe/fe-basic/js/core/es8.html","/soft-engineering/fe/fe-basic/js/core/function.html","/soft-engineering/fe/fe-basic/js/core/prototype.html","/soft-engineering/fe/fe-basic/js/core/scope.html","/soft-engineering/fe/fe-basic/js/frames/react.html","/soft-engineering/fe/fe-basic/js/frames/vue2.x.html","/soft-engineering/fe/fe-basic/js/frames/vue3.x.html","/soft-engineering/fe/fe-frames/vue/v2x/style.html","/404.html","/cs-basic/basic/","/cs-basic/database/","/soft-engineering/structuredev/","/soft-engineering/tools/","/programming/language/python/","/soft-engineering/fe/fe-basic/css/Properties/","/soft-engineering/fe/fe-basic/js/basic/","/soft-engineering/fe/fe-basic/js/senior/","/soft-engineering/fe/fe-basic/js/core/","/soft-engineering/fe/fe-basic/js/frames/","/soft-engineering/fe/fe-frames/vue/v2x/"],xe="SEARCH_PRO_QUERY_HISTORY",d=I(xe,[]),we=()=>{const{queryHistoryCount:n}=R,t=n>0;return{enabled:t,queryHistory:d,addQueryHistory:a=>{t&&(d.value=Array.from(new Set([a,...d.value.slice(0,n-1)])))},removeQueryHistory:a=>{d.value=[...d.value.slice(0,a),...d.value.slice(a+1)]}}},A=n=>ke[n.id]+("anchor"in n?`#${n.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:_}=R,b=I(Re,[]),Qe=()=>{const n=_>0;return{enabled:n,resultHistory:b,addResultHistory:t=>{if(n){const a={link:A(t),display:t.display};"header"in t&&(a.header=t.header),b.value=[a,...b.value.slice(0,_-1)]}},removeResultHistory:t=>{b.value=[...b.value.slice(0,t),...b.value.slice(t+1)]}}},Ce=n=>{const t=fe(),a=M(),Q=me(),l=E(0),H=w(()=>l.value>0),h=he([]);return ve(()=>{const{search:v,terminate:C}=pe(),y=de(u=>{const j=u.join(" "),{searchFilter:S=m=>m,splitWord:q,suggestionsFilter:T,...p}=t.value;j?(l.value+=1,v(u.join(" "),a.value,p).then(m=>S(m,j,a.value,Q.value)).then(m=>{l.value-=1,h.value=m}).catch(m=>{console.warn(m),l.value-=1,l.value||(h.value=[])})):h.value=[]},R.searchDelay-R.suggestDelay);Y([n,a],([u])=>y(u),{immediate:!0}),be(()=>{C()})}),{isSearching:H,results:h}};var qe=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(n,{emit:t}){const a=ie(),Q=M(),l=ne(te),{enabled:H,addQueryHistory:h,queryHistory:v,removeQueryHistory:C}=we(),{enabled:y,resultHistory:u,addResultHistory:j,removeResultHistory:S}=Qe(),q=H||y,T=ae(n,"queries"),{results:p,isSearching:m}=Ce(T),r=re({isQuery:!0,index:0}),g=E(0),f=E(0),O=w(()=>q&&(v.value.length>0||u.value.length>0)),D=w(()=>p.value.length>0),P=w(()=>p.value[g.value]||null),G=()=>{const{isQuery:e,index:s}=r;s===0?(r.isQuery=!e,r.index=e?u.value.length-1:v.value.length-1):r.index=s-1},W=()=>{const{isQuery:e,index:s}=r;s===(e?v.value.length-1:u.value.length-1)?(r.isQuery=!e,r.index=0):r.index=s+1},V=()=>{g.value=g.value>0?g.value-1:p.value.length-1,f.value=P.value.contents.length-1},z=()=>{g.value=g.value<p.value.length-1?g.value+1:0,f.value=0},X=()=>{f.value<P.value.contents.length-1?f.value+=1:z()},Z=()=>{f.value>0?f.value-=1:V()},L=e=>e.map(s=>He(s)?s:i(s[0],s[1])),J=e=>{if(e.type==="customField"){const s=ye[e.index]||"$content",[o,x=""]=je(s)?s[Q.value].split("$content"):s.split("$content");return e.display.map(c=>i("div",L([o,...c,x])))}return e.display.map(s=>i("div",L(s)))},k=()=>{g.value=0,f.value=0,t("updateQuery",""),t("close")},K=()=>H?i("ul",{class:"search-pro-result-list"},i("li",{class:"search-pro-result-list-item"},[i("div",{class:"search-pro-result-title"},l.value.queryHistory),v.value.map((e,s)=>i("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===s}],onClick:()=>{t("updateQuery",e)}},[i(U,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},e),i("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),C(s)}})]))])):null,N=()=>y?i("ul",{class:"search-pro-result-list"},i("li",{class:"search-pro-result-list-item"},[i("div",{class:"search-pro-result-title"},l.value.resultHistory),u.value.map((e,s)=>i(F,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===s}],onClick:()=>{k()}},()=>[i(U,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},[e.header?i("div",{class:"content-header"},e.header):null,i("div",e.display.map(o=>L(o)).flat())]),i("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),S(s)}})]))])):null;return le("keydown",e=>{if(n.isFocusing){if(D.value){if(e.key==="ArrowUp")Z();else if(e.key==="ArrowDown")X();else if(e.key==="Enter"){const s=P.value.contents[f.value];h(n.queries.join(" ")),j(s),a.push(A(s)),k()}}else if(y){if(e.key==="ArrowUp")G();else if(e.key==="ArrowDown")W();else if(e.key==="Enter"){const{index:s}=r;r.isQuery?(t("updateQuery",v.value[s]),e.preventDefault()):(a.push(u.value[s].link),k())}}}}),Y([g,f],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>i("div",{class:["search-pro-result-wrapper",{empty:n.queries.length?!D.value:!O.value}],id:"search-pro-results"},n.queries.length?m.value?i(oe,{hint:l.value.searching}):D.value?i("ul",{class:"search-pro-result-list"},p.value.map(({title:e,contents:s},o)=>{const x=g.value===o;return i("li",{class:["search-pro-result-list-item",{active:x}]},[i("div",{class:"search-pro-result-title"},e||l.value.defaultTitle),s.map((c,ee)=>{const B=x&&f.value===ee;return i(F,{to:A(c),class:["search-pro-result-item",{active:B,"aria-selected":B}],onClick:()=>{h(n.queries.join(" ")),j(c),k()}},()=>[c.type==="text"?null:i(c.type==="title"?ce:c.type==="heading"?ue:ge,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},[c.type==="text"&&c.header?i("div",{class:"content-header"},c.header):null,i("div",J(c))])])})])})):l.value.emptyResult:q?O.value?[K(),N()]:l.value.emptyHistory:l.value.emptyResult)}});export{qe as default};
